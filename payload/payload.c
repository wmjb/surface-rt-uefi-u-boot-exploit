#include <stdint.h>
#include "system_regs.h"
#include "tegra30_uart.h"
#include "printf.h"
#include "mmu_dump.h"

void main()
{

	// CP15SDISABLE & CFGSDISABLE
	*((uint32_t*)0x6000C208) |= (0 << 4) | (0 << 5);

//	MC_SMMU_CONFIG_0 = h10
//	MC 7000:f000
	*((uint32_t*)0x7000f010) = 0;
	
	disable_mmu();
	clear_ns();
	
	uint32_t *ID_base = (uint32_t*)0x50041080;
	
	for (int i = 0; i < 6; i++) 
	{
		ID_base[i] = 0;
	}
	
	void (*uboot)(void) = (void (*)())0x84000000U;
	uboot();

	printf("Why are we here????\r\n");
	
	while(1);
}

